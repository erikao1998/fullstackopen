(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{20:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(2),c=t(15),a=t.n(c),o=(t(20),t(6)),s=t(3),u=t(0),i=function(e){var n=e.add,t=e.handleName,r=e.handleNumber,c=e.name,a=e.number;return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"add a new"}),Object(u.jsxs)("form",{onSubmit:n,children:[Object(u.jsxs)("div",{children:["name:"," ",Object(u.jsx)("input",{value:c,onChange:t})]}),Object(u.jsxs)("div",{children:["number:"," ",Object(u.jsx)("input",{value:a,onChange:r})]}),Object(u.jsx)("button",{type:"submit",children:"add"})]})]})},d=function(e){var n=e.person,t=e.deletePerson;return Object(u.jsxs)("pre",{className:"person",children:[n.name," ",n.number," ",Object(u.jsx)("button",{onClick:t,children:"delete"})]})},l=function(e){var n=e.handleChange;return Object(u.jsxs)("div",{children:["filter shown with"," ",Object(u.jsx)("input",{onChange:n})]})},m=t(4),j=t.n(m),b="/api/persons",f=function(){return j.a.get(b)},h=function(e){return j.a.post(b,e)},O=function(e){return j.a.delete("".concat(b,"/").concat(e))},g=function(e,n){return j.a.put("".concat(b,"/").concat(e),n)},p=function(e){var n=e.errorMessage;return console.log("redErrorin tila on "+n.red),null===n.message?null:!0===n.red?Object(u.jsx)("div",{className:"redError",children:n.message}):Object(u.jsx)("div",{className:"greenError",children:n.message})},v=function(){var e=Object(r.useState)([]),n=Object(s.a)(e,2),t=n[0],c=n[1],a=Object(r.useState)(""),m=Object(s.a)(a,2),j=m[0],b=m[1],v=Object(r.useState)(""),x=Object(s.a)(v,2),w=x[0],C=x[1],N=Object(r.useState)(""),k=Object(s.a)(N,2),S=k[0],T=k[1],y=Object(r.useState)({message:null,red:!0}),E=Object(s.a)(y,2),P=E[0],D=E[1];Object(r.useEffect)((function(){f().then((function(e){c(e.data)}))}),[]);var U=function(e){var n=t.find((function(n){return n.id===e}));console.log(n),window.confirm("Delete ".concat(n.name))&&O(e).then((function(r){c(t.filter((function(n){return n.id!==e}))),D({message:"Deleted ".concat(n.name),red:!1}),setTimeout((function(){D({message:null,red:!1})}),2e3)})).catch((function(e){D({message:"".concat(n.name," was already deleted from server"),red:!0}),setTimeout((function(){D({message:null,red:!1})}),2e3)}))};return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Phonebook"}),Object(u.jsx)(p,{errorMessage:P}),Object(u.jsx)(l,{handleChange:function(e){T(e.target.value)}}),Object(u.jsx)(i,{add:function(e){if(e.preventDefault(),console.log("button clicked"),1===function(e,n){for(var t=0;t<n.length;t++)if(n[t].name===e)return 1;return 0}(j,t)){if(window.confirm("".concat(j," is already added to phonebook, replace the old number with a new one"))){var n=t.find((function(e){return e.name===j})),r=Object(o.a)(Object(o.a)({},n),{},{number:w});g(n.id,r).then((function(e){c(t.map((function(t){return t.id!==n.id?t:e.data}))),D({message:"Updated ".concat(n.name,"'s number"),red:!1}),setTimeout((function(){D({message:null,red:!1})}),2e3)})).catch((function(e){D({message:"".concat(n.name," was already deleted from server"),red:!0}),setTimeout((function(){D({message:null,red:!1})}),2e3)}))}}else{var a={name:j,number:w};h(a).then((function(e){c(t.concat(e.data)),b(""),C(""),D({message:"Added '".concat(a.name,"'"),red:!1}),setTimeout((function(){D({message:null,red:!1})}),2e3)})).catch((function(e){D({message:"".concat(e.response.data.error),red:!0}),setTimeout((function(){D({message:null,red:!1})}),3e3)}))}},handleName:function(e){console.log(e.target.value),b(e.target.value)},handleNumber:function(e){console.log(e.target.value),C(e.target.value)},name:j,number:w}),Object(u.jsx)("h2",{children:"Numbers"}),""===S?t.map((function(e,n){return Object(u.jsx)("div",{children:Object(u.jsx)(d,{person:e,deletePerson:function(){return U(e.id)}})},e.id)})):t.filter((function(e){return e.name.toUpperCase().includes(S.toUpperCase())})).map((function(e,n){return Object(u.jsx)("div",{children:Object(u.jsx)(d,{person:e,deletePerson:function(){return U(e.id)}})},e.id)}))]})};a.a.render(Object(u.jsx)(v,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.d046ef9b.chunk.js.map